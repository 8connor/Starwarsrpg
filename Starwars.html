<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link type="text/css" rel="stylesheet" href="Assets/css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <title>Star-Wars</title>
</head>

<body>
    <h1>Star-Wars RPG</h1>
    <h1>Your character</h1>
    <div class="attackers">
        <div id="obiWan">
            <img src="Assets/images/obiwan.jpg">
            <p id="obiWanHP"></p></img>
        </div>
        <div id="yoda">
            <img alt="baby yoda" src="Assets/images/babyYoda.jpg">
            <p id="yodaHP"></p>
        </div>
        <div id="luke">
            <img src="Assets/images/luke.jpg">
            <p id="lukeHP"></p></img>
        </div>
    </div>
    <h1>Enemies available to attack</h1>
    <div class="enemies">
        <div id="boba">
            <img src="Assets/images/boba.jpg">
            <p id="bobaHP"></p></img>
        </div>
        <div id="vader">
            <img src="Assets/images/vader.jpg">
            <p id="vaderHP"></p></img>
        </div>

        <div id="maul">
            <img src="Assets/images/maul.jpg">
            <p id="maulHP"></p></img>
        </div>
    </div>
    <h1 class="fightZone">Fight section</h1>
    <button id="attack">Attack</button>
    <h1>defender</h1>


    <script>

        // This runs the function whenever the document is loaded.

        $(document).ready(function () {

            //these are objects being defined in an array.
            var obj = {
                characters: [
                    {
                        name: "luke",
                        health: 100,
                        AP: 20,
                        CAP: 10,
                        selected: false,
                    },
                    {
                        name: "yoda",
                        health: 120,
                        AP: 20, 
                        CAP: 10,
                        selected: false,
                    },
                    {
                        name: "obiWan",
                        health: 110,
                        AP: 20,
                        CAP: 10,
                        selected: false,
                    },
                    {
                        name: "boba",
                        health: 100,
                        AP: 20,
                        CAP: 150,
                        selected: false,
                    },
                    {
                        name: "vader",
                        health: 100,
                        AP: 20,
                        CAP: 10,
                        selected: false,
                    },
                    {
                        name: "maul",
                        health: 100,
                        AP: 20,
                        CAP: 10,
                        selected: false,
                    }]
            }

            // This will grab the health property in each corresponding property in the array.
            var obi = obj.characters[0];
            var yoda = obj.characters[1];
            var luke = obj.characters[2];

            var boba = obj.characters[3];
            var vader = obj.characters[4];
            var maul = obj.characters[5];


            $("#obiWanHP").html(obi.health);
            $("#yodaHP").html(yoda.health);
            $("#lukeHP").html(luke.health);


            $("#bobaHP").html(boba.health);
            $("#vaderHP").html(vader.health);
            $("#maulHP").html(maul.health);



            // These functions will make the other photos disappear when one of them is clicked.

            // Characters

            // array created to hold the values of the selected character
            var attackerAP;
            var attackerHP;
            var defenderCAP;
            var defenderHP;

            $("#yoda").on("click", function () {
                $("#obiWan").hide();
                $("#luke").hide();

                yoda.selected = true;

                if (yoda.selected === true) {
                    attackerHP = yoda.health
                    attackerAP = yoda.AP
                };
            });

            $("#obiWan").on("click", function () {
                $("#yoda").hide();
                $("#luke").hide();

                obi.selected = true;

                if (obi.selected === true) {
                    attackerHP = obi.health
                    attackerAP = obi.AP
                };
            });
            
            $("#luke").on("click", function () {
                $("#obiWan").hide();
                $("#yoda").hide();

                luke.selected = true;

                if (luke.selected === true) {
                    attackerHP = luke.health
                    attackerAP = luke.AP
                };
            });



            //Enemies


            $("#vader").on("click", function () {
                $("#boba").hide();
                $("#maul").hide();

                vader.selected = true;

                if (vader.selected === true) {
                    defenderHP = vader.health
                    defenderCAP = vader.CAP
                };
            });
            
            $("#boba").on("click", function () {
                $("#vader").hide();
                $("#maul").hide();

                boba.selected = true;

                if (boba.selected === true) {
                    defenderHP = boba.health
                    defenderCAP = boba.CAP
                };
            });
            
            $("#maul").on("click", function () {
                $("#boba").hide();
                $("#vader").hide();

                maul.selected = true;

                if (maul.selected === true) {
                    defenderHP = maul.health
                    defenderCAP = maul.CAP
                };
            });


            // This is the attack button.
            $("#attack").on("click", function () {
                
                defenderHP = defenderHP - attackerAP
                attackerHP = attackerHP - defenderCAP

                if (defenderHP <= 0) {
                    console.log("you win")
                } else {
                    console.log("continue attack")
                    console.log(defenderHP)
                    console.log(attackerHP)
                };

                $("#maulHP").html(defenderHP)
                $("#bobaHP").html(defenderHP)
                $("#vaderHP").html(defenderHP)
                $("#yodaHP").html(attackerHP)
                $("#obiWanHP").html(attackerHP)
                $("#lukeHP").html(attackerHP)
            });
        });
    </script>
</body>

</html>